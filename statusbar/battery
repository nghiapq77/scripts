#!/bin/sh

case $BLOCK_BUTTON in
    1) notify-send "$(acpi -b)";;
    3) notify-send "$(acpi -i)";;
esac

# Loop through all attached batteries.
for battery in /sys/class/power_supply/BAT?*; do
    # If non-first battery, print a space separator.
    [ -n "${capacity+x}" ] && printf " "

    # Sets up the status and capacity
    case "$(cat "$battery/status")" in
        "Full") status="ï‰€" ;;
        "Discharging") status="ï‰" ;;
        "Charging") status="ğŸ”Œ" ;;
        "Not charging") status="ï‰€" ;;
        "Unknown") status="â™»ï¸" ;;
    esac
    capacity=$(cat "$battery/capacity")

    # Will make a warn icon if discharging and low
    [ "$capacity" -le 50 ] && [ "$status" != "ğŸ”Œ" ] && status="ï‰ƒ"
    [ "$capacity" -le 25 ] && [ "$status" != "ğŸ”Œ" ] && status="ï‰„"

    # Output battery info
    printf "%s" "$status $capacity%" 
done && exit 0
